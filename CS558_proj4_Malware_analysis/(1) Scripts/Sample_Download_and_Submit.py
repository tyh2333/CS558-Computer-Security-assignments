import requests
import wget
#### Downloading sample ####
url = 'http://cybersec.cs.binghamton.edu/uploads/EBKOSRKRTLQFOIUJDXPZDJRLDERBLL'
filename = wget.download(url)
filename
###### Cuckoo submit ######
REST_URL = "http://128.226.117.206:1337/tasks/create/file"

SAMPLE_FILE = filename

HEADERS={"Authorization" : "Bearer eFTNjQHdqVCL3oRoJAvgqA"}

with open(SAMPLE_FILE, "rb") as sample:
    files = {"file": ("temp_file_name", sample)}
    r = requests.post(REST_URL, headers=HEADERS,files=files)
    
task_id = r.json()["task_id"]
task_url = task_id
task_url


REST_URL_VIEW = "http://128.226.117.206:1337/tasks/view/"+str(task_url)
response = requests.get(REST_URL_VIEW, headers=HEADERS)
response

response.content

REST_URL_VIEW = "http://128.226.117.206:1337/tasks/report/"+str(task_url)
response2 = requests.get(REST_URL_VIEW, headers=HEADERS)

response2

response2.content

file = open("resp_text.txt","w");
file.write(response2.text)
file.close()
file = open("response2.text"."wb")
file.write(response2.content)
file.close()



